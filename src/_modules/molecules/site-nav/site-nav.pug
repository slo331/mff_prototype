include ../../atoms/button/button
include ../../molecules/site-search/site-search

mixin site-nav(spec)
	- spec = spec || {}
	- spec.__class = spec.__class || ''

	.nav-wrap(class=spec.__class)&attributes(attributes)
		.nav-mobile.mobile-only
			.nav-menu
				.hamburger-menu
					.nav-line.l1
					.nav-line.l2
					.nav-line.l3
		nav.nav-links
			.nav-links__wrap
				ul.links
					each item, index in spec.navs
						li.links-item(data-menu="menu-" + (index + 1) class=(item.mobile === true ? 'mobile-only' : ''))
							.item__parent
								a(href= item.url)= item.name
								if item.sub
									+button({
										'__text': '',
										'__type': 'button',
										'__class': 'btn--mobileSub',
										'__iconAfter': 'icon-arrow-down'
									})
							if item.sub
								.item__sub
									.links-sub__container
										.sub-links__wrap
											ul.sublinks
												each sub, index in item.sub
													li.sublinks-item
														.item__child
															a(href= sub.url)= sub.name
															if sub.sub
																+button({
																	'__text': '',
																	'__type': 'button',
																	'__class': 'btn--mobileSubchild',
																	'__iconAfter': 'icon-arrow-down'
																})
														if sub.sub
															.item__subchild
																.links-subchild__container
																	.subchild-links__wrap
																		ul.subchildlinks
																			each child, index in sub.sub
																				li.subchildlinks-item
																					.item__subchild-item
																						a(href= child.url)= child.name
				+site-search()
		.nav-overlay