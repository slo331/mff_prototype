include ../../atoms/button/button
include ../../atoms/card/card
include ../../molecules/list-filter/list-filter
include ../../molecules/pagination/pagination

mixin listing(spec)
	- spec = spec || {}
	- spec.__class = spec.__class || ''
	- spec.filter = spec.filter || ''
	- spec.btnFilter = spec.btnFilter || ''

	.listing(class=spec.__class)&attributes(attributes)
		if spec.title
			.listing-title
				h2.title=spec.title

				if spec.desc
					.rte
						p!=spec.desc

		.listing-wrap(data-endpoint=spec.endpoint data-url=spec.url)
			if spec.filter
				+list-filter({
					'filter': spec.filter,
					'btnFilter': spec.btnFilter
				})
			
			.list
				.row
			
			if spec.pagination
				.pagination
					+pagination-api({
						"currentPage": 1,
						"totalPages": 10,
						"paddingSize": 2,
						"pageUrl": spec.pagination
					})
	
mixin listingItem(spec)
	- spec = spec || {}
	- spec.__class = spec.__class || ''
	
	script(type="text/x-dot-template" id="listingItem")
		|{{? it}}
		|{{~ it.listing :item}}
		a.list-link.col-md-6.col-sm-6.col-xs-12(href='{{= item.url}}')
			+card({
				'img': '{{= item.img}}',
				'imgTitle': '{{= item.imgTitle}}',
				'subtitle': '{{= item.subtitle}}',
				'title': '{{= item.title}}',
				'desc': '{{= item.desc}}',
				'details': '{{= item.details}}',
				'date': '{{= item.details.date}}',
				'shares': '{{= item.details.shares}}',
				'views': '{{= item.details.views}}',
				'url': '{{= item.url}}'
			})
		|{{~}}
		|{{?}}
	
mixin partnerList(spec)
	- spec = spec || {}
	- spec.__class = spec.__class || ''
	
	script(type="text/x-dot-template" id="listingItem")
		|{{? it}}
		|{{~ it.listing :item:index}}
		.partners-item.col-md-3.col-sm-3.col-xs-6(data-index='{{= index + 1}}' data-row='')
			.partners-wrap
				.partners-logo
					img(src='{{= item.img}}' alt='{{= item.imgTitle}}' title='{{= item.imgTitle}}')
				.partners-content
					.partners-content__wrap
						+button({
							'__text': '',
							'__type': 'button',
							'__class': 'btn--close',
							'__iconAfter': 'icon-close',
              '__arialabel': 'Close'
						})
						.partners-info
							.info-img
								img(src='{{= item.img}}' alt='{{= item.imgTitle}}' title='{{= item.imgTitle}}')
							.info-content
								.title {{= item.title}}
								.desc {{= item.desc}}
		|{{? index % 4 == 3 }}
		.partners-item--break.col-md-12.col-sm-12.col-xs-12
		|{{?}}
		|{{~}}
		|{{?}}
